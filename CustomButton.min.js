(function(e){CustomButton=function(p,u,x,j,t,s,l,o,n){this.root=p;this.stage=u;this.parent_stage=u;this.debug=0;if(!n){n={}}var r=n.fg;var i=n.fg;var w=n.rover;var k=n.rout;if(!r){r="#fff"}if(!i){i="#069"}if(!o){o=30}if(!l){l=120}if(l<5){l=5}var h=1;var v="d";if(n){if(n.parent_stage!=null){this.parent_stage=n.parent_stage}if(n.no_mover_init!=null){h=(!n.no_mover_init)}if(n.cursor!=null){v=n.cursor}if(n.debug!=null){this.debug=n.debug}}if(h){if(this.stage.lm_enableMouseOver){var m="*";if(this.root&&this.root.lm&&this.root.lm.get_my_contents_id&&this.root.__contents_id){m=this.root.lm.get_my_contents_id(this.root)}this.stage.lm_enableMouseOver.call(this.stage,10,this.root.lm,m)}else{this.stage.enableMouseOver(10)}}this.button=new createjs.Container();this.button.x=t;this.button.y=s;this.button.width=l;this.button.height=o;this.parent_stage.addChild(this.button);this._bg=i;this.background=new createjs.Shape();this.background.graphics.setStrokeStyle(1).beginStroke(r).beginFill(i).drawRoundRect(0,0,l,o,4);this.background.cmd_fill=new createjs.Graphics.Fill(i);this.background.graphics.append(this.background.cmd_fill);this.button.addChild(this.background);if(x){if(this.debug){console.log("Text Button:")}this.label=new createjs.Text(x,"12px sans-serif",r);this.label.x=l/2;this.label.y=o/2;this.label.textAlign="center";this.label.textBaseline="middle";this.button.addChild(this.label)}else{if(this.debug){console.log("Cursor Button:")}this.label=new createjs.Shape(g(r));switch(v){case"l":case"left":this.label.rotation=-90;break;case"r":case"right":this.label.rotation=90;break;case"u":case"up":this.label.rotation=0;break;case"d":case"down":this.label.rotation=180;break}if(l>o){this.label.scaleX=this.label.scaleY=o/12;this.label.x=l/2-0*this.label.scaleX;this.label.y=o/2}else{this.label.scaleX=this.label.scaleY=l/12;this.label.x=l/2;this.label.y=o/2-0*this.label.scaleY}this.button.addChild(this.label)}if(this.stage.isWebGL){this.btnW=l;this.btnH=o;this.background.cache(0,0,l,o);this.label.cache(-1*l/2,-1*o/2,l,o)}this.button.alpha=1;this.button.gc=this.background;this._callback_click=j;this._callback_rover=w;this._callback_rout=k;var q=this.root;this.button.on("click",this._click,this,false,q);this.button.on("mouseover",this._mouseover,this,false,q);this.button.on("mouseout",this._mouseout,this,false,q)};CursorButton=function(n,p,x,w,v,u,l,y,i,t,m,s,h,k){this.root=n;this.stage=p;if(!i){i="#fff"}if(!t){t="#069"}if(l<5){l=5}if(y<5){y=5}if(!Object.setPrototypeOf){Object.defineProperty(Object,"setPrototypeOf",{value:function q(B,A){B.__proto__=A},writable:true,configurable:true})}Object.setPrototypeOf(this,CustomButton.prototype);if(this.stage.lm_enableMouseOver){var z="*";if(this.root.lm&&this.root.lm.get_my_contents_id&&this.root.__contents_id){z=this.root.lm.get_my_contents_id(this.root)}this.stage.lm_enableMouseOver.call(this.stage,10,this.root.lm,z)}else{this.stage.enableMouseOver(10)}this.button=new createjs.Container();this.button.x=v;this.button.y=u;this.button.width=l;this.button.height=y;x.addChild(this.button);this._bg=t;this.background=new createjs.Shape();var o=l;var r=y;this.background.graphics.setStrokeStyle(1).beginStroke(i).beginFill(t).drawRoundRect(0,0,o,r,4);this.background.cmd_fill=new createjs.Graphics.Fill(t);this.background.graphics.append(this.background.cmd_fill);this.button.addChild(this.background);this.label=new createjs.Shape(g(i));switch(w){case"left":this.label.rotation=-90;break;case"right":this.label.rotation=90;break;case"up":this.label.rotation=0;break;case"down":this.label.rotation=180;break}if(o>r){this.label.scaleX=this.label.scaleY=r/12;this.label.x=o/2-0*this.label.scaleX;this.label.y=r/2}else{this.label.scaleX=this.label.scaleY=o/12;this.label.x=o/2;this.label.y=r/2-0*this.label.scaleY}this.button.addChild(this.label);if(this.stage.isWebGL){this.btnW=o;this.btnH=r;this.background.cache(0,0,o,r);this.label.cache(-1*o/2,-1*r/2,o,r)}this.button.alpha=1;this.button.gc=this.background;this._callback_click=m;this._callback_rover=s;this._callback_rout=h;var j=this.root;this.button.on("click",this._click,this,false,j);this.button.on("mouseover",this._mouseover,this,false,j);this.button.on("mouseout",this._mouseout,this,false,j)};function g(h){var i=new createjs.Graphics();i.beginFill(h).moveTo(-5,3).lineTo(5,3).lineTo(0,-3).cp().ef();return i}CustomButton.prototype.set_geometry=function(i,h){c.call(this,i,h)};function c(i,h){if(i!=null){this.button.x=i}if(h!=null){this.button.y=h}}CustomButton.prototype.destroy=function(h){d.call(this,h)};function d(h){this.stage.removeChild(this.button);if(this.background){this.button.removeChild(this.background)}if(this.label){this.button.removeChild(this.label)}if(this.button){this.button.off("click",this._click);this.button.off("mouseover",this._mouseover);this.button.off("mouseout",this._mouseout)}delete this.button;delete this.background;delete this.label}CustomButton.prototype.get_version=function(){return"1.0"};CustomButton.prototype.show=function(){this.button.visible=true};CustomButton.prototype.hide=function(){this.button.visible=false};CustomButton.prototype._click=function(h,i){b.call(this,h,i)};function b(h,i){var k=h.target;var j=i;this.button.alpha=0.5;this.background.cmd_fill.style="pink";if(this._callback_click){this._callback_click.call(i,h,i)}if(this.stage){this.stage.update()}if(this.button){this.button.alpha=1}if(this.background){this.background.cmd_fill.style=this._bg}}CustomButton.prototype._mouseover=function(h,i){a.call(this,h,i)};function a(h,j){var k=h.target;var i=j;if(document&&document.body&&document.body.style){document.body.style.cursor="pointer"}this.button.alpha=0.5;this.background.cmd_fill.style="cyan";if(this.stage){this.stage.update()}if(this._callback_rover){this._callback_rover.call(i,h,i)}}CustomButton.prototype._mouseout=function(h,i){f.call(this,h,i)};function f(h,j){var k=h.target;var i=j;if(document&&document.body&&document.body.style){document.body.style.cursor=""}this.button.alpha=1;this.background.cmd_fill.style=this._bg;if(this.stage){this.stage.update()}if(this._callback_rout){this._callback_rout.call(i,h,i)}}CustomButton.prototype.update_text=function(h){this.label.text=h;if(this.stage.isWebGL){this.background.cache(0,0,this.btnW,this.btnH);this.label.cache(-1*this.btnW/2,-1*this.btnH/2,this.btnW,this.btnH)}}}(window));